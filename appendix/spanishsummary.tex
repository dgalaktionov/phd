\chapter{Resumen del trabajo realizado}
\label{ch:appendix-spanishsummary}

    En este ap\'endice se presenta un resumen del trabajo realizado durante la tesis. En la secci\'on \ref{sec:appendix-spanishsummary:introduccion} se puede encontrar una introducci\'on, donde describimos brevemente el problema a resolver. En la secci\'on \ref{sec:appendix-spanishsummary:conclusiones} resumimos todas las contribuciones de esta tesis. Finalmente, en la \'ultima secci\'on \ref{sec:appendix-spanishsummary:trabajo-futuro} mencionamos los futuros desarrollos planteados como continuaci\'on del trabajo expuesto.

\section{Introducci\'on}
\label{sec:appendix-spanishsummary:introduccion}

\subsection{Motivaci\'on}

    En el contexto de las redes de transporte p\'ublico, los \'ultimos a\~nos han visto numerosos avances en las tecnolog\'ias inal\'ambricas, redes de sensores (especialmente aquellas relacionadas con RFID) y computaci\'on ubicua, lo que ha llevado a una adopci\'on generalizada de la tecnolog\'ia de seguimiento de pasajeros por parte de los servicios de transporte p\'ublico, lo que hace que la recolecci\'on de grandes cantidades de datos sobre los h\'abitos de viaje de estos pasajeros sea m\'as f\'acil que nunca antes.
    Esto, a su vez, ha abierto la puerta a la explotaci\'on de este tipo de informaci\'on para estudiar la demanda (uso) de una red, a diferencia de las t\'ecnicas conocidas para analizar la oferta (rutas, horarios, etc.).
    Para estas aplicaciones, no son los datos sobre trayectorias individuales los que tienen importancia, sino las medidas del uso de la red, con las cuales se pueden desarrollar plataformas para el monitoreo del tr\'afico y las tareas de planificaci\'on de carreteras. Ejemplos de medidas \'utiles son los indicadores de accesibilidad y centralidad, referidos a la facilidad para llegar a determinadas ubicaciones o la importancia de ciertas paradas dentro de una red \cite{Morency2007193, El-Geneidy2011, Wang2015335}. Todas estas medidas se basan en alg\'un tipo de consultas de conteo que determinan el n\'umero de distintos viajes que ocurren dentro de una ventana espacial y/o temporal.
    
    Para habilitar estos nuevos tipos de estudios de demanda, es imperativo desarrollar mecanismos que hagan posible persistir y administrar eficientemente estas vastas (y siempre crecientes) colecciones de datos. Cuando tambi\'en tenemos en cuenta que los patrones de consulta eficientes deben ser compatibles para que estos datos sean ``\'utiles'', la soluci\'on claramente constituye un desaf\'io tecnol\'ogico emergente, que se est\'a abordando desde varios dominios diferentes y cientos de soluciones ad-hoc han sido implementados por todas las \textit{Smart Cities} en todo el mundo.
    
    Por consiguiente, una representaci\'on pr\'actica para esta informaci\'on que soporte la indexaci\'on eficiente tendr\'ia numerosas aplicaciones posibles. En \cite{tu2018spatial} podemos ver c\'omo es posible combinar trayectorias GPS con datos de \acrfull{afc} para recrear trayectorias completas y estudiar la cantidad de pasajeros por \'area. Alternativamente, en \cite{weng2018mining} las trayectorias completas se infieren de los datos \gls{afc}, para luego analizar los patrones de comportamiento y las preferencias de los viajeros con el objetivo de mejorar la eficiencia de la red. Otra aplicaci\'on que se habilita mediante dicho an\'alisis es la publicidad dirigida \cite{zhang2017targeted}, ya que los intereses de un usuario pueden ser perfilados por sus patrones de viaje. Otros trabajos se centran en analizar el uso de paradas o estaciones individuales, como \cite{ceapa2012avoiding}, donde los autores determinan que los tiempos de congesti\'on en la red de metro de Londres son predecibles y ocurren en intervalos de tiempo estrechos. Armado con dicha informaci\'on, un usuario puede elegir un patr\'on de viaje diferente para evitar la multitud y mejorar su experiencia general. Cuando consideramos el transporte p\'ublico a trav\'es de una red de carreteras, podemos encontrar obras centradas en el estudio de los pasajeros de taxis. Un ejemplo notable es \cite{yuan2013t}, que analiza un sistema de recomendaci\'on de taxis bidireccionales, en el que los taxistas se\~nalan los espacios de estacionamiento m\'as rentables mientras los pasajeros son dirigidos a los segmentos de la calle con una alta probabilidad de encontrar un taxi vacante.
    
    Una observaci\'on clave de todos los trabajos mencionados anteriormente es que una simple colecci\'on de trayectorias o puntos marcados en el tiempo sobre un espacio bidimensional de latitud y longitud no ser\'ia lo suficientemente rica como para realizar estos estudios. Por lo tanto, deben trabajar con una representaci\'on que considere cierto grado de informaci\'on \textit{sem\'antica}. Como m\'inimo, esa informaci\'on debe incluir referencias a elementos de la red (paradas, l\'ineas o calles) y, a veces, incluso alg\'un identificador de usuario, pudiendo \'este \'ultimo ser an\'onimo. Por lo tanto, requerimos una representaci\'on que difiera de los \'indices y bases de datos espaciales tradicionales, ya que debe admitir m\'etodos de acceso eficientes basados en elementos de red.


\subsection{Definici\'on del problema}

    Considerando la red subyacente, hemos identificado dos contextos distinguibles para las redes de transporte:
    
    \begin{itemize}
    	\item \textbf{Redes basadas en calles urbanas}: dentro de estas redes, una trayectoria puede comenzar en cualquier momento y ubicaci\'on, y puede seguir cualquier ruta arbitraria de segmentos a lo largo de una red de carreteras definida.
        Las trayectorias de taxis, bicicletas o flotas de veh\'iculos entran en esta categor\'ia. Para estos sistemas, las consultas de inter\'es pueden involucrar puntos de inter\'es alrededor de los cuales podr\'ian terminar estas trayectorias, o segmentos de carreteras que podr\'ian ser parte de una ruta.
        
    	\item \textbf{Redes de transporte p\'ublico}: las trayectorias deben comenzar en puntos predefinidos (por lo general, paradas o estaciones) en los horarios establecidos definidos por los veh\'iculos que realizan una parada en esos puntos. Estos veh\'iculos siguen caminos predefinidos a lo largo de estos puntos, formando rutas, y los usuarios que viajan en el mismo veh\'iculo producir\'ian partes id\'enticas de trayectorias.
    Esta clasificaci\'on se aplica a los sistemas de autobuses y metro, junto con la mayor\'ia de otros sistemas de transporte urbano. Se espera que para una colecci\'on de trayectorias de una red de transporte p\'ublico algunas de las consultas de inter\'es puedan girar en torno a los elementos principales de la red, que son rutas y paradas.
    \end{itemize}
    
    Independientemente del contexto de trabajo, operamos con un modelo de red, que tiende a ser bastante simple en las redes de calles urbanas, consistiendo simplemente en un grafo dirigido con segmentos de calles como nodos, donde la conexi\'on a otros segmentos de calles indica que la navegaci\'on es posible. Para las redes de transporte p\'ublico, podr\'ia ser pertinente considerar una representaci\'on m\'as rica que un gr\'afico de paradas y l\'ineas, pero que tenga tambi\'en en cuenta las rutas formadas por veh\'iculos de transporte, como autobuses o trenes, que visitan las paradas en horarios establecidos en las que los viajeros pueden subir o bajar del veh\'iculo. Un modelo muy conocido que incluye estos elementos de red, entre otros menos interesantes para nuestro problema, es el \gls{gtfs},\footnote{\url{https://developers.google.com/transit/gtfs/}} que ha sido ampliamente adoptado por las plataformas de datos abiertos en numerosas \textit{smart cities}.
    
    Para cualquier tipo de red, una \textit{trayectoria} se define como una ruta formada por una secuencia de elementos de red (generalmente paradas o segmentos de calles), que fue recorrida por un solo viajero en un viaje, con un origen y un destino final. En esta definici\'on debemos considerar algunas limitaciones pr\'acticas inherentes a la naturaleza de una trayectoria, ya que se podr\'ia argumentar si los viajeros que tardan m\'as de una hora en cambiar una l\'inea a otra realmente las est\'an cambiando, o si simplemente han finalizado sus trayectorias y est\'an comenzando una segunda trayectoria con alg\'un nuevo destino. Estos casos son complicados para decidir inequ\'ivocamente en la pr\'actica y, por lo tanto, nuestro enfoque tiende a establecer l\'imites en los tiempos de espera y las distancias del camino entre paradas para una sola trayectoria.
    
    Nuestras definiciones tambi\'en requieren poder hablar del concepto de tiempo. Cuando trabajamos con un modelo de red de transporte p\'ublico que integra recorridos formados por veh\'iculos de transporte que siguen l\'ineas, no ser\'ia necesario representar la hora exacta en que cada usuario se ha subido a una parada, solo un identificador de recorrido, ya que los tiempos de parada estar\'ian ya disponibles en la red modelada, evitando cierta redundancia en la representaci\'on de trayectorias.
    Alternativamente, para redes de calles urbanas u otros casos donde la informaci\'on de ruta no est\'a disponible, se puede considerar una representaci\'on de intervalos de tiempo para lograr una representaci\'on compacta, donde el tiempo se expresar\'ia en intervalos discretos entre uno y treinta minutos.
    
    Existen t\'ecnicas de recolecci\'on masiva de datos para los dos contextos de red discutidos anteriormente, lo que lleva al problema de manejar eficientemente esta vasta cantidad de informaci\'on. Por ello, adem\'as de las soluciones habituales conocidas de \textit{Big Data}, en nuestro trabajo abrimos una l\'inea de investigaci\'on sobre la aplicaci\'on de estructuras de datos compactas para los problemas tratados en este \'ambito. En particular, es posible aplicar muchas de las t\'ecnicas del campo de las estructuras de datos compactas para crear representaciones autoindexadas que admitan patrones de consulta eficientes adaptados a las necesidades de informaci\'on espec\'ificas, al tiempo que ofrece alg\'un tipo de compresi\'on con respecto a una representaci\'on m\'as tradicional.
    
    Con nuestras representaciones buscamos una soluci\'on que pueda dar una respuesta eficiente a consultas sobre los h\'abitos de movilidad de los usuarios de un sistema de transporte. Las consultas a considerar pueden variar en funci\'on del contexto de la red de transporte. As\'i, para un contexto de redes de calles, como el de los movimientos en taxi, podr\'iamos destacar las siguientes consultas:
    
    \begin{itemize}
        \item N\'umero medio de movimientos que han pasado por una calle o tramo de calle durante un intervalo temporal.
        \item N\'umero de viajes que se han realizado a partir de un origen determinado durante los fines de semana.
        \item De aquellos viajes que han empezado en un origen, obtener cu\'antos han terminado el viaje en un destino concreto.
        \item Par cada d\'ia, obtener las diez calles donde m\'as frecuentemente comienzan los viajes.
    \end{itemize}
    
    Por otro lado, en el contexto de las redes de transporte p\'ublico, nos pueden interesar consultas que tengan en consideraci\'on los elementos de la red, como pueden ser l\'ineas/rutas y los recorridos individuales de \'estas. Por tanto, algunas de las consultas relevantes podr\'ian ser:
    
    \begin{itemize}
        \item N\'umero de usuarios que se han subido a las paradas extremas de una l\'inea durante las horas puntas de la ma\~nana.
        \item Carga media del veh\'iculo de transporte (tren o autob\'us) entre dos paradas de una l\'inea.
        \item N\'umero de veces que una parada concreta se ha utilizado para cambiar de l\'inea, en lugar de como un destino final.
        \item N\'umero de viajes originados desde una parada concreta de una l\'inea que hayan terminado en otra parada concreta dentro de un intervalo temporal.
    \end{itemize}
    
    Es importante destacar de estas consultas que, a pesar de que muchas de ellas se refieran a calles o a paradas concretas, es habitual que la red subyacente no permanezca est\'atica durante todo el tiempo que comprende el conjunto de datos, sino que existan cambios de naturaleza temporal (obras o accidentes) o permanente (paradas o l\'ineas cerradas o abiertas).  Sin embargo, no consideramos que estos cambios en la red sean importantes para las tareas finales, ya que el efecto en la demanda de la movilidad es m\'inimo: cuando una parada de metro deja de estar disponible, los usuarios simplemente utilizar\'an otra parada cercana, de forma que se sigue pudiendo realizar un an\'alisis de movilidad sobre zonas.
    
    \medskip
    Por \'ultimo, hemos considerado que una soluci\'on usable tambi\'en requerir\'ia disponer de una herramienta que provea una interfaz de usuario simple que permita la explotaci\'on de esta informaci\'on por parte de investigadores, empresas de transporte, administraciones municipales y cualquier otro tipo de usuarios finales. Esta interfaz debe, como m\'inimo, permitir visualizar los elementos de la red en un mapa, adem\'as de permitir la capacidad de realizar consultas sobre estos elementos de una manera intuitiva y accesible, respetando los principios de calidad habituales de cualquier software similar orientado a usuario.

\section{Contribuciones y conclusiones}
\label{sec:appendix-spanishsummary:conclusiones}

    En los sistemas de transporte de las \textit{smart cities}, las nuevas tecnolog\'ias como el monitoreo del tr\'afico, la existencia de mecanismos de pago automatizados (por ejemplo, tarjetas inteligentes) y el conteo autom\'atico de pasajeros han permitido generar una gran cantidad de informaci\'on altamente detallada, datos en tiempo real \'utiles para definir medidas que caracterizan una red de transporte. Estos datos resultan particularmente interesantes porque consisten en viajes reales, combinando as\'i impl\'icitamente la demanda del sistema con la red de calles o el servicio ofrecido por un sistema de transporte p\'ublico.

    Al mismo tiempo, el an\'alisis de estos registros hist\'oricos sobre la demanda de la red puede interesar a las compa\~n\'ias de transporte, as\'i como a otras entidades que puedan estar interesadas en estudiar los movimientos de los viajeros en un contexto urbano. Para hacer posible este tipo de an\'alisis, hemos propuesto representaciones eficaces y flexibles basadas en estructuras de datos compactas que pueden adaptarse f\'acilmente a contextos de transporte urbano (calles y la mayor\'ia de los sistemas de transporte p\'ublico), y que pueden manejar diversos casos de uso con considerable eficiencia temporal y de memoria.
    
    La representaci\'on propuesta para las redes de calles, llamada \gls{ctr}, codifica los identificadores de los nodos de red que se recorren en forma de una cadena de texto, al igual que la secuencia de los intervalos de tiempo en los que se visita cada uno de estos nodos. Con esta codificaci\'on hemos construido un \gls{csa} para las secuencias de nodos (componente espacial) y tambi\'en ofrecemos dos variantes del \gls{wt} (el \gls{htwt} y el \gls{wm}) como alternativas para las secuencias de intervalos de tiempo (componente temporal). Ambas estructuras pueden utilizarse de forma conjunta para resolver consultas \mbox{espacio-temporales} complejas relacionadas con la utilizaci\'on de la red.

    En cuanto a las redes de transporte p\'ublico, hemos definido un modelo que puede usarse para representar la demanda de la mayor\'ia de los sistemas de transporte existentes, con el cu\'al toda trayectoria queda representada como una secuencia de subidas y bajadas en varios puntos de la red. Para cada subida es necesario definir: la parada, la l\'inea y el recorrido concreto del veh\'iculo de transporte. Ofrecemos dos alternativas para la representaci\'on de estos componentes: el \gls{ttctr}, que codifica las combinaciones v\'alidas de parada y l\'inea en un mismo vocabulario con el que se construye un \gls{csa}; y el \gls{xctr}, donde la secuencia de l\'ineas se mantiene en una \gls{wm} separado. Ambas representaciones usan una \gls{wm} adicional para los c\'odigos de recorrido, que se pueden usar para filtrar resultados temporalmente al disponer de la hora de inicio de cada recorrido y el tiempo medio de llegada a cada una de las paradas de la l\'inea. 

    
    Adem\'as, hemos desarrollado un prototipo de aplicaci\'on \gls{gis} (llamada {\em Trippy} que integra las representaciones compactas desarrolladas, lo que permite analizar la informaci\'on almacenada por un usuario final de una manera simple, sin requerir que tengan un conocimiento previo de las tecnolog\'ias subyacentes. Adem\'as, esta interfaz de usuario valida a\'un m\'as la elecci\'on de un enfoque basado en estructuras de datos compactas, demostrando as\'i que es posible desarrollar un producto competitivo y \'agil que pueda ser adoptado por una organizaci\'on.
    
    Finalmente, en el contexto de la investigaci\'on de estructuras de datos compactas, creemos que este trabajo puede abrir un nuevo campo de aplicaciones pr\'acticas para estas estructuras y algoritmos, como se ha hecho anteriormente para los campos de \textit{recuperaci\'on de informaci\'on} y \textit{bioinform\'atica}.

    \medskip
    La siguiente lista resume las principales contribuciones en nuestro trabajo:

    \begin{enumerate}
        \item En el contexto de viajes a trav\'es de redes de calles urbanas, hemos desarrollado una representaci\'on basada en un \gls{csa} modificado y diferentes alternativas del \gls{wt} llamado \gls{ctr}, que requiere tan solo un 36\% del tama\~no de una l\'inea base sin comprimir, al tiempo que maneja consultas espacio-temporales en el orden de varios microsegundos, al tiempo que ofrece trade-offs configurables.
        
        \item Hemos propuesto un modelo extensible para la representaci\'on de viajes a trav\'es de una red de transporte p\'ublico, que puede adaptarse para la mayor\'ia de los sistemas de transporte del mundo.
        
        \item Hemos desarrollado dos representaciones alternativas para el contexto de viajes a trav\'es de redes de transporte p\'ublico, \gls{ttctr} y \gls{xctr}, basadas en las mismas estructuras del \gls{ctr}, y que pueden resolver la mayor\'ia de nuestras consultas propuestas acerca de patrones de trayectorias sobre la red en el orden de varios microsegundos, mientras que solo se necesita alrededor del 50\% de espacio del que requerir\'ia una representaci\'on tradicional sin \'indice.
        
        \item Hemos presentado un m\'etodo para comprimir \acrfull{sat} sin afectar a la complejidad temporal de sus operaciones, y lo aplicamos en \gls{tm} como una estructura para acelerar las consultas de carga de red en el contexto del transporte p\'ublico.
        
        \item Hemos desarrollado un prototipo preliminar de aplicaci\'on para analizar la demanda de redes de transporte p\'ublico que utiliza nuestras representaciones propuestas, as\'i como tecnolog\'ias \gls{gis}.
    \end{enumerate}


\section{Trabajo futuro}
\label{sec:appendix-spanishsummary:trabajo-futuro}
    Si bien consideramos que hay muchos desarrollos futuros posibles para las representaciones que hemos propuesto para viajes a trav\'es de redes de transporte p\'ublico, nos preocupa principalmente encontrar una representaci\'on \'unica que pueda manejar eficientemente los dos tipos de consultas propuestas en la secci\'on~\ref{sec:newctr:desc}: las consultas sobre carga de la red y tambi\'en aquellas sobre los patrones de viaje. Encontrar tal representaci\'on resulta considerablemente complejo, ya que la mayor\'ia de las soluciones que permiten agregar eficientemente datos multidimensionales (como paradas y horarios o viajes) no pueden soportar la mayor\'ia de nuestras consultas de patrones de viaje.
    
    \medskip
    En cuanto a los m\'etodos de evaluaci\'on de nuestras representaciones para las trayectorias en redes de transporte p\'ublico, consideramos importante poder disponer de registros de trayectos de transporte reales, con los que podr\'iamos realizar la evaluaci\'on sin tener que depender de la generaci\'on de trayectos sint\'eticos sobre las redes. Estos registros podr\'ian usarse tambi\'en para aumentar artificialmente nuestro conjunto de datos, ya que ser\'ia posible repetir los mismos trayectos sobre d\'ias diferentes, con o sin peque\~nas modificaciones, o tambi\'en utilizar esa informaci\'on para generar nuevos trayectos. Actualmente es posible recolectar la informaci\'on necesaria para reconstruir estos trayectos, como por ejemplo con el uso de las tarjetas de transporte tanto a la entrada como a la salida de las estaciones de metro, o con aplicaciones m\'oviles para los pasajeros de autob\'us.
    
    \medskip
    Por otro lado, en relaci\'on a nuestro prototipo desarrollado, {\em Trippy}, nuestros objetivos m\'as urgentes son soportar una visualizaci\'on intuitiva de l\'ineas que permita al usuario realizar consultas sobre ellas, as\'i como la adici\'on de medios para consultar el \textit{endpoint del histograma}, para mostrar el uso de una parada o una l\'inea a lo largo del tiempo con gr\'aficos din\'amicos. Finalmente, la interfaz de usuario actual se puede mejorar para admitir diferentes visualizaciones interactivas para el uso total de la red en todas las l\'ineas dentro de un rango de tiempo. Adem\'as podr\'iamos incluir consultas de accesibilidad, donde a partir e una parada de la red estamos interesados en obtener el tiempo promedio necesario para llegar a cualquier otra parada.